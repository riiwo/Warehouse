<%= form_for(@product)  do |f| %>
    <input type="hidden" value="<%=@product[:id]%>" id="cur_prod">
    <%= f.text_field :name, :placeholder => 'Name', class: 'form-control'%>
    <br>
    <%= f.text_area :description, :placeholder => 'Description', class: 'form-control'%>
    <br>
    <%= f.text_field :img, :placeholder => 'Image URL', class: 'form-control'%>
    <br>
    <%= f.text_field :price, :placeholder => 'Price (cents)', class: 'form-control'%>
    <br>
    <h3>Add to Group:</h3>
    <div class="btn-group btn-group-justified" role="group" aria-label="...">
      <div class="btn-group" role="group">
        <%= f.select 'groups', options_from_collection_for_select(Group.all, 'id', 'name'),{},{:id => 'group_select', :class => 'form-control'} %>
      </div>
        <div class="btn-group" role="group">
          <%= f.button 'Add to Group', {:id => 'add_to_group', :class => 'form-control btn btn-success'} %>
      </div>
    </div>

      <h3>In groups:</h3>
      <ul>
        <% if @groups %>
          <% @groups.each do |g| %>
           <li><%= g.name %></li>
          <% end %>
        <% else %>
          <li>No groups to show.</li>
        <%end%>
      </ul>
    <% if @product.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>
          <ul>
            <% @product.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <br>
    <div class="actions">
      <%= f.submit :class => 'btn btn-block btn-success' %>
    </div>
<% end %>
<script type="text/javascript">
  $(document).ready(function() {
    $('#add_to_group').on('click', function(e) {
      e.preventDefault();
      $.ajax({
        type: 'POST',
        url: '/add_group',
        data: {product_ID : $('#cur_prod').val(), group_ID: $('#group_select').val()},
        dataType: 'JSON',
        success: function(response) {
          alert(response)
        }
      });
    });
  });
</script>