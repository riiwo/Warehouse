<%= form_for(@product)  do |f| %>
    <%= f.text_field :name, :placeholder => 'Name', class: 'form-control'%>
    <br>
    <%= f.text_area :description, :placeholder => 'Description', class: 'form-control'%>
    <br>
    <div class="input-group">
      <%= f.text_field :img, :placeholder => 'Image URL', class: 'form-control', id: 'product_img' %>
      <span class="input-group-addon" id="preview">
        <a id="tooltip" data-toggle="tooltip" title="<img style='max-height: 100%; max-width: 100%;' src='<%= @product[:img] %>' />">
          <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
        </a>
      </span>
    </div>
    <br>
    <%= f.text_field :price, :placeholder => 'Price (cents)', class: 'form-control'%>
    <br>
    <% if @product.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>
          <ul>
            <% @product.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <div class="actions">
      <%= f.submit :class => 'btn btn-block btn-success' %>
    </div>
<% end %>
<script type="text/javascript" charset="utf-8">
 $(document).ready(function() {
   $('#product_img').blur(function() {
     console.log('fire');
     console.log($('.input-group').find('#tooltip').attr("data-original-title"));
     $('#tooltip').attr('data-original-title', "<img style='max-height: 100%; max-width: 100%;' src='"+$('#product_img').val()+"' />");
   });
   $('a[data-toggle="tooltip"]').tooltip({
     animated: 'fade',
     placement: 'left',
     html: true
   });
 });
</script>